{% extends "base.html" %}

{% block body %}
{% if resultDict %}
<table style="width:100%">
  <tr>
    {% if admin %}<th>Delete</th>{% endif %}
    <th>Telèfon</th>
    <th>Nom</th>
    <th>Directe</th>
    <th>Departament</th>
  </tr>
  {% for contacte in resultDict %}
  <tr>
    {% if admin %}
    <td>
      <input class="btn" type="submit" id="btn-{{ contacte.tlf }}"
	     data-tlf="{{ contacte.tlf }}"
	     data-nom="{{ contacte.nom }}"
	     value="ESBORRAR"
	     style="color: white; background: #990000; font-weight: bold;"
	     onclick="submitForm('{{ contacte.tlf }}')">
    </td>
    {% endif %}
    <td>{{ contacte.tlf }}</td>
    <td><a href="{{ url_for('tlf.contacte', user=contacte.nom) }}">{{ contacte.nom }}</a></td>
    <td>{{ contacte.tlf_dir }}</td>
    <td><a href="{{ url_for('tlf.dept', dept=contacte.dept) }}">{{ contacte.dept }}</a></td>
  </tr>
  {% endfor %}
</table>
{% endif %}

{% if admin %}
<br>
<div id="accordion">  
  <h3>Afegeix un nou contacte</h3>
  <div>
    <form action="{{ url_for('tlf.insert') }}" method="post" accept-charset="utf-8">
      <input type="text" placeholder="Telèfon (màx. 9 caràcters)" name="tlf">
      <input type="text" placeholder="Nom" name="nom">
      <br><br>
      <input class="btn" type="submit" value="Afegir">
    </form>
  </div>
  {% if resultDict %}
  <h3>Modifica el contacte</h3>
  <div>
    <form action="{{ url_for('tlf.update') }}" method="post" accept-charset="utf-8">
      <input name="old_tlf" placeholder="Telèfon del contacte a modificar">
      <input name="nou_tlf" placeholder="Nou telèfon">
      <input name="nou_nom" placeholder="Nou nom">
      <br>
      <input class="btn" type="submit" value="Modificar">
    </form>
  </div>
  {% endif %}
</div>

<br>

<form action="{{ url_for('tlf.get') }}" method="get">
  <input class="btn" type="submit" value="Exportar CSV">
</form>
<br>
<form action="{{ url_for('tlf.upload') }}" method="post" enctype="multipart/form-data">
  <input type="file" name="file">
  <input class="btn" type="submit" value="Upload">
</form>
{% endif %}

{% endblock %}
